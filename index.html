<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Moonlight Cafe - C√† ph√™ & B√°nh ng·ªçt</title>
    <meta name="description" content="Moonlight Cafe - N∆°i th∆∞·ªüng th·ª©c c√† ph√™ v√† b√°nh ng·ªçt th∆∞·ª£ng h·∫°ng trong kh√¥ng gian ·∫•m c√∫ng d∆∞·ªõi √°nh trƒÉng.">
    
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;500;600;700&family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Custom CSS -->
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/mobile.css">
    
    <!-- SweetAlert2 -->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
</head>
<body>
    <!-- Loading Overlay -->
    <div class="loading-overlay">
        <div class="loader"></div>
    </div>

    <!-- Navigation Overlay -->
    <div class="nav-overlay" id="navOverlay"></div>

    <!-- Header -->
    <header class="header" id="header">
        <div class="container">
            <nav class="nav">
                <a href="index.html" class="nav-brand">
                    <span class="nav-brand-icon">üåô</span>
                    <span class="nav-brand-text">Moonlight Cafe</span>
                </a>
                
                <ul class="nav-menu" id="navMenu">
                    <li><a href="index.html" class="nav-link active">Trang ch·ªß</a></li>
                    <li><a href="menu.html" class="nav-link">Menu</a></li>
                    <li><a href="news.html" class="nav-link">Tin t·ª©c</a></li>
                    <li><a href="about.html" class="nav-link">V·ªÅ ch√∫ng t√¥i</a></li>
                    <li class="admin-nav-item hidden"><a href="admin.html" class="nav-link admin-link">
                        <i class="fas fa-cog"></i> Qu·∫£n tr·ªã
                    </a></li>
                </ul>
                
                <div class="nav-actions">
                    <a href="cart.html" class="nav-icon" id="cartIcon">
                        <i class="fas fa-shopping-bag"></i>
                        <span class="badge" id="cartCount">0</span>
                    </a>
                    <a href="#" class="nav-icon" id="userIcon">
                        <i class="fas fa-user"></i>
                    </a>
                    <div class="nav-toggle" id="navToggle">
                        <span></span>
                        <span></span>
                        <span></span>
                    </div>
                </div>
            </nav>
        </div>
    </header>

    <!-- Hero Section -->
    <section class="hero" id="hero">
        <div class="container">
            <div class="hero-content">
                <span class="hero-subtitle">‚ú® Ch√†o m·ª´ng ƒë·∫øn v·ªõi Moonlight</span>
                <h1 class="hero-title">Th∆∞·ªüng th·ª©c <span>C√† ph√™</span> d∆∞·ªõi √°nh trƒÉng</h1>
                <p class="hero-description">
                    N∆°i h·ªôi t·ª• c·ªßa h∆∞∆°ng v·ªã c√† ph√™ th∆∞·ª£ng h·∫°ng v√† nh·ªØng chi·∫øc b√°nh ng·ªçt tinh t·∫ø. 
                    T·∫≠n h∆∞·ªüng kh√¥ng gian ·∫•m c√∫ng, l√£ng m·∫°n d∆∞·ªõi √°nh trƒÉng.
                </p>
                <div class="hero-buttons">
                    <a href="menu.html" class="btn btn-primary">
                        <i class="fas fa-coffee"></i> Xem Menu
                    </a>
                    <a href="#featured" class="btn btn-outline">
                        <i class="fas fa-star"></i> M√≥n n·ªïi b·∫≠t
                    </a>
                </div>
            </div>
        </div>
        
        <!-- Hero Background Elements -->
        <div class="hero-bg-elements">
            <div class="hero-moon"></div>
            <div class="hero-stars"></div>
        </div>
    </section>

    <!-- Featured Menu Section -->
    <section class="section" id="featured">
        <div class="container">
            <div class="section-header">
                <span class="section-subtitle">Menu n·ªïi b·∫≠t</span>
                <h2 class="section-title">ƒê·∫∑c s·∫£n c·ªßa ch√∫ng t√¥i</h2>
                <div class="section-divider"></div>
            </div>
            
            <div class="product-grid" id="featuredProducts">
                <!-- Products will be loaded from Firebase -->
                <div class="product-card skeleton">
                    <div class="product-img-wrapper">
                        <div class="skeleton-img"></div>
                    </div>
                    <div class="product-info">
                        <div class="skeleton-text"></div>
                        <div class="skeleton-text short"></div>
                    </div>
                </div>
                <div class="product-card skeleton">
                    <div class="product-img-wrapper">
                        <div class="skeleton-img"></div>
                    </div>
                    <div class="product-info">
                        <div class="skeleton-text"></div>
                        <div class="skeleton-text short"></div>
                    </div>
                </div>
                <div class="product-card skeleton">
                    <div class="product-img-wrapper">
                        <div class="skeleton-img"></div>
                    </div>
                    <div class="product-info">
                        <div class="skeleton-text"></div>
                        <div class="skeleton-text short"></div>
                    </div>
                </div>
                <div class="product-card skeleton">
                    <div class="product-img-wrapper">
                        <div class="skeleton-img"></div>
                    </div>
                    <div class="product-info">
                        <div class="skeleton-text"></div>
                        <div class="skeleton-text short"></div>
                    </div>
                </div>
            </div>
            
            <div class="text-center mt-5">
                <a href="menu.html" class="btn btn-outline">
                    Xem t·∫•t c·∫£ <i class="fas fa-arrow-right"></i>
                </a>
            </div>
        </div>
    </section>

    <!-- About Section -->
    <section class="section about-section">
        <div class="container">
            <div class="about-grid">
                <div class="about-image">
                    <img src="https://images.unsplash.com/photo-1495474472287-4d71bcdd2085?w=600" alt="Moonlight Cafe Interior">
                    <div class="about-badge">
                        <span class="badge-number">5+</span>
                        <span class="badge-text">NƒÉm kinh nghi·ªám</span>
                    </div>
                </div>
                <div class="about-content">
                    <span class="section-subtitle">C√¢u chuy·ªán c·ªßa ch√∫ng t√¥i</span>
                    <h2 class="section-title">N∆°i nh·ªØng t√°ch c√† ph√™ k·ªÉ chuy·ªán</h2>
                    <p>
                        Moonlight Cafe ra ƒë·ªùi t·ª´ t√¨nh y√™u v·ªõi c√† ph√™ v√† mong mu·ªën t·∫°o ra m·ªôt kh√¥ng gian 
                        n∆°i m·ªçi ng∆∞·ªùi c√≥ th·ªÉ th∆∞ gi√£n, k·∫øt n·ªëi v√† t·∫≠n h∆∞·ªüng nh·ªØng kho·∫£nh kh·∫Øc ƒë·∫πp.
                    </p>
                    <p>
                        Ch√∫ng t√¥i t·ª± h√†o v·ªõi ngu·ªìn nguy√™n li·ªáu cao c·∫•p, ƒë∆∞·ª£c tuy·ªÉn ch·ªçn k·ªπ l∆∞·ª°ng t·ª´ 
                        c√°c v√πng tr·ªìng c√† ph√™ n·ªïi ti·∫øng v√† nh·ªØng c√¥ng th·ª©c b√°nh ƒë·ªôc quy·ªÅn.
                    </p>
                    <div class="about-features">
                        <div class="about-feature">
                            <i class="fas fa-leaf"></i>
                            <span>100% Organic</span>
                        </div>
                        <div class="about-feature">
                            <i class="fas fa-award"></i>
                            <span>Ch·∫•t l∆∞·ª£ng cao</span>
                        </div>
                        <div class="about-feature">
                            <i class="fas fa-heart"></i>
                            <span>L√†m v·ªõi t√¨nh y√™u</span>
                        </div>
                    </div>
                    <a href="about.html" class="btn btn-primary mt-3">
                        T√¨m hi·ªÉu th√™m <i class="fas fa-arrow-right"></i>
                    </a>
                </div>
            </div>
        </div>
    </section>

    <!-- Testimonials Section -->
    <section class="section testimonials-section">
        <div class="container">
            <div class="section-header">
                <span class="section-subtitle">ƒê√°nh gi√°</span>
                <h2 class="section-title">Kh√°ch h√†ng n√≥i g√¨ v·ªÅ ch√∫ng t√¥i</h2>
                <div class="section-divider"></div>
            </div>
            
            <div class="testimonials-slider" id="testimonials">
                <div class="testimonial-card">
                    <div class="testimonial-rating">
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                    </div>
                    <p class="testimonial-text">
                        "C√† ph√™ ·ªü ƒë√¢y th·ª±c s·ª± r·∫•t ngon! Kh√¥ng gian lung linh d∆∞·ªõi √°nh ƒë√®n v√†ng ·∫•m. 
                        ƒê√¢y l√† n∆°i tuy·ªát v·ªùi ƒë·ªÉ l√†m vi·ªác v√† th∆∞ gi√£n."
                    </p>
                    <div class="testimonial-author">
                        <img src="https://i.pravatar.cc/100?img=1" alt="Customer">
                        <div class="testimonial-author-info">
                            <h5>Nguy·ªÖn Minh Anh</h5>
                            <span>Kh√°ch h√†ng th∆∞·ªùng xuy√™n</span>
                        </div>
                    </div>
                </div>
                
                <div class="testimonial-card">
                    <div class="testimonial-rating">
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                    </div>
                    <p class="testimonial-text">
                        "B√°nh ng·ªçt ·ªü Moonlight l√† ngon nh·∫•t m√† t√¥i t·ª´ng ƒÉn! 
                        ƒê·∫∑c bi·ªát l√† Tiramisu, m·ªói l·∫ßn gh√© l√† ph·∫£i order m·ªôt mi·∫øng."
                    </p>
                    <div class="testimonial-author">
                        <img src="https://i.pravatar.cc/100?img=5" alt="Customer">
                        <div class="testimonial-author-info">
                            <h5>Tr·∫ßn H∆∞∆°ng Giang</h5>
                            <span>Food Blogger</span>
                        </div>
                    </div>
                </div>
                
                <div class="testimonial-card">
                    <div class="testimonial-rating">
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star-half-alt"></i>
                    </div>
                    <p class="testimonial-text">
                        "Nh√¢n vi√™n th√¢n thi·ªán, ph·ª•c v·ª• nhanh. ƒê·∫∑t h√†ng online r·∫•t ti·ªán, 
                        giao h√†ng ƒë√∫ng gi·ªù v√† ƒë·ªì u·ªëng v·∫´n gi·ªØ nguy√™n ch·∫•t l∆∞·ª£ng!"
                    </p>
                    <div class="testimonial-author">
                        <img src="https://i.pravatar.cc/100?img=8" alt="Customer">
                        <div class="testimonial-author-info">
                            <h5>L√™ VƒÉn H√πng</h5>
                            <span>Doanh nh√¢n</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Gallery Section -->
    <section class="section gallery-section">
        <div class="container">
            <div class="section-header">
                <span class="section-subtitle">H√¨nh ·∫£nh</span>
                <h2 class="section-title">Kh√¥ng gian Moonlight</h2>
                <div class="section-divider"></div>
            </div>
            
            <div class="gallery-grid">
                <div class="gallery-item large">
                    <img src="https://images.unsplash.com/photo-1501339847302-ac426a4a7cbb?w=600" alt="Coffee Shop Interior">
                    <div class="gallery-overlay">
                        <i class="fas fa-expand"></i>
                    </div>
                </div>
                <div class="gallery-item">
                    <img src="https://images.unsplash.com/photo-1511920170033-f8396924c348?w=400" alt="Coffee Cup">
                    <div class="gallery-overlay">
                        <i class="fas fa-expand"></i>
                    </div>
                </div>
                <div class="gallery-item">
                    <img src="https://images.unsplash.com/photo-1509042239860-f550ce710b93?w=400" alt="Latte Art">
                    <div class="gallery-overlay">
                        <i class="fas fa-expand"></i>
                    </div>
                </div>
                <div class="gallery-item">
                    <img src="https://images.unsplash.com/photo-1558618666-fcd25c85cd64?w=400" alt="Pastries">
                    <div class="gallery-overlay">
                        <i class="fas fa-expand"></i>
                    </div>
                </div>
                <div class="gallery-item">
                    <img src="https://images.unsplash.com/photo-1554118811-1e0d58224f24?w=400" alt="Cafe Atmosphere">
                    <div class="gallery-overlay">
                        <i class="fas fa-expand"></i>
                    </div>
                </div>
                <div class="gallery-item large">
                    <img src="https://images.unsplash.com/photo-1445116572660-236099ec97a0?w=600" alt="Cozy Corner">
                    <div class="gallery-overlay">
                        <i class="fas fa-expand"></i>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- CTA Section -->
    <section class="section cta-section">
        <div class="container">
            <div class="cta-content">
                <h2>S·∫µn s√†ng th∆∞·ªüng th·ª©c?</h2>
                <p>ƒê·∫∑t h√†ng online ngay h√¥m nay v√† nh·∫≠n ∆∞u ƒë√£i 10% cho ƒë∆°n h√†ng ƒë·∫ßu ti√™n!</p>
                <div class="cta-buttons">
                    <a href="menu.html" class="btn btn-primary btn-lg">
                        <i class="fas fa-shopping-bag"></i> ƒê·∫∑t h√†ng ngay
                    </a>
                    <a href="tel:0123456789" class="btn btn-outline btn-lg">
                        <i class="fas fa-phone"></i> 0123 456 789
                    </a>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-grid">
                <div class="footer-col">
                    <div class="footer-brand">
                        <span class="nav-brand-icon">üåô</span>
                        <span class="nav-brand-text">Moonlight Cafe</span>
                    </div>
                    <p>
                        N∆°i th∆∞·ªüng th·ª©c c√† ph√™ v√† b√°nh ng·ªçt th∆∞·ª£ng h·∫°ng 
                        trong kh√¥ng gian ·∫•m c√∫ng d∆∞·ªõi √°nh trƒÉng.
                    </p>
                    <div class="footer-social">
                        <a href="#"><i class="fab fa-facebook-f"></i></a>
                        <a href="#"><i class="fab fa-instagram"></i></a>
                        <a href="#"><i class="fab fa-tiktok"></i></a>
                        <a href="#"><i class="fab fa-youtube"></i></a>
                    </div>
                </div>
                
                <div class="footer-col">
                    <h4 class="footer-title">Li√™n k·∫øt nhanh</h4>
                    <ul class="footer-links">
                        <li><a href="index.html">Trang ch·ªß</a></li>
                        <li><a href="menu.html">Menu</a></li>
                        <li><a href="news.html">Tin t·ª©c</a></li>
                        <li><a href="about.html">V·ªÅ ch√∫ng t√¥i</a></li>
                    </ul>
                </div>
                
                <div class="footer-col">
                    <h4 class="footer-title">H·ªó tr·ª£</h4>
                    <ul class="footer-links">
                        <li><a href="orders.html">Theo d√µi ƒë∆°n h√†ng</a></li>
                        <li><a href="#">Ch√≠nh s√°ch ƒë·ªïi tr·∫£</a></li>
                        <li><a href="#">FAQ</a></li>
                        <li><a href="#">Li√™n h·ªá</a></li>
                    </ul>
                </div>
                
                <div class="footer-col">
                    <h4 class="footer-title">Li√™n h·ªá</h4>
                    <ul class="footer-contact">
                        <li>
                            <i class="fas fa-map-marker-alt"></i>
                            <span>123 ƒê∆∞·ªùng ABC, Qu·∫≠n 1, TP.HCM</span>
                        </li>
                        <li>
                            <i class="fas fa-phone"></i>
                            <span>0123 456 789</span>
                        </li>
                        <li>
                            <i class="fas fa-envelope"></i>
                            <span>hello@moonlightcafe.vn</span>
                        </li>
                        <li>
                            <i class="fas fa-clock"></i>
                            <span>7:00 - 22:00 h√†ng ng√†y</span>
                        </li>
                    </ul>
                </div>
            </div>
            
            <div class="footer-bottom">
                <p>&copy; 2024 Moonlight Cafe. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <!-- User Dropdown Menu -->
    <div class="user-dropdown" id="userDropdown">
        <div class="user-dropdown-header" id="userInfo">
            <i class="fas fa-user-circle"></i>
            <span>Kh√°ch</span>
        </div>
        <div class="user-dropdown-menu">
            <a href="login.html" class="dropdown-item" id="loginBtn">
                <i class="fas fa-sign-in-alt"></i> ƒêƒÉng nh·∫≠p
            </a>
            <a href="register.html" class="dropdown-item" id="registerBtn">
                <i class="fas fa-user-plus"></i> ƒêƒÉng k√Ω
            </a>
            <a href="orders.html" class="dropdown-item logged-in-only hidden">
                <i class="fas fa-box"></i> ƒê∆°n h√†ng c·ªßa t√¥i
            </a>
            <a href="#" class="dropdown-item logged-in-only hidden" id="logoutBtn">
                <i class="fas fa-sign-out-alt"></i> ƒêƒÉng xu·∫•t
            </a>
        </div>
    </div>

    <!-- Scripts -->
    <script type="module">
        import { auth, db, onAuthStateChanged, ref, get, onValue } from './js/firebase-config.js';
        import { saveUserSession, getCurrentUser, isAdmin, getUserDropdownHTML } from './js/auth-helper.js';
        
        // DOM Elements
        const header = document.getElementById('header');
        const navToggle = document.getElementById('navToggle');
        const navMenu = document.getElementById('navMenu');
        const navOverlay = document.getElementById('navOverlay');
        const userIcon = document.getElementById('userIcon');
        const userDropdown = document.getElementById('userDropdown');
        const cartCount = document.getElementById('cartCount');
        const featuredProducts = document.getElementById('featuredProducts');
        
        // Loading
        window.addEventListener('load', () => {
            setTimeout(() => {
                document.querySelector('.loading-overlay').classList.add('hidden');
            }, 800);
        });
        
        // Header scroll effect
        window.addEventListener('scroll', () => {
            if (window.scrollY > 50) {
                header.classList.add('scrolled');
            } else {
                header.classList.remove('scrolled');
            }
        });
        
        // Mobile menu toggle
        navToggle.addEventListener('click', () => {
            navMenu.classList.toggle('active');
            navOverlay.classList.toggle('active');
        });
        
        navOverlay.addEventListener('click', () => {
            navMenu.classList.remove('active');
            navOverlay.classList.remove('active');
        });
        
        // User dropdown toggle
        userIcon.addEventListener('click', (e) => {
            e.preventDefault();
            userDropdown.classList.toggle('active');
        });
        
        // Close dropdown when clicking outside
        document.addEventListener('click', (e) => {
            if (!userIcon.contains(e.target) && !userDropdown.contains(e.target)) {
                userDropdown.classList.remove('active');
            }
        });
        
        // Auth state listener
        onAuthStateChanged(auth, async (user) => {
            const userInfo = document.getElementById('userInfo');
            const loginBtn = document.getElementById('loginBtn');
            const registerBtn = document.getElementById('registerBtn');
            const loggedInItems = document.querySelectorAll('.logged-in-only');
            const dropdownMenu = document.querySelector('.user-dropdown-menu');
            
            if (user) {
                // L∆∞u th√¥ng tin user v√†o localStorage
                const userData = await saveUserSession(auth, db);
                
                // C·∫≠p nh·∫≠t dropdown menu v·ªõi ph√¢n quy·ªÅn
                dropdownMenu.innerHTML = getUserDropdownHTML(userData);
                
                // C·∫≠p nh·∫≠t t√™n hi·ªÉn th·ªã
                const displayName = userData.firstName || userData.lastName 
                    ? `${userData.lastName || ''} ${userData.firstName || ''}`.trim()
                    : user.email.split('@')[0];
                
                userInfo.innerHTML = `
                    <i class="fas fa-user-circle"></i>
                    <span>${displayName}</span>
                `;
                
                loginBtn.classList.add('hidden');
                registerBtn.classList.add('hidden');
                loggedInItems.forEach(item => item.classList.remove('hidden'));
                
                // Hi·ªÉn/·∫©n link Qu·∫£n tr·ªã d·ª±a tr√™n role
                const adminNavItems = document.querySelectorAll('.admin-nav-item');
                const isUserAdmin = isAdmin(userData);
                adminNavItems.forEach(item => {
                    if (isUserAdmin) {
                        item.classList.remove('hidden');
                        if (!item.classList.contains('nav-link')) {
                            item.style.display = 'flex';
                        }
                    } else {
                        item.classList.add('hidden');
                        item.style.display = '';
                    }
                });
                
                // G·∫Øn s·ª± ki·ªán logout
                document.getElementById('logoutBtn')?.addEventListener('click', handleLogout);
            } else {
                localStorage.removeItem('moonlight_user');
                
                userInfo.innerHTML = `
                    <i class="fas fa-user-circle"></i>
                    <span>Kh√°ch</span>
                `;
                
                dropdownMenu.innerHTML = getUserDropdownHTML(null);
                loginBtn.classList.remove('hidden');
                registerBtn.classList.remove('hidden');
                loggedInItems.forEach(item => item.classList.add('hidden'));
                
                // ·∫®n link Qu·∫£n tr·ªã
                document.querySelectorAll('.admin-nav-item').forEach(item => {
                    item.classList.add('hidden');
                });
            }
        });
        
        // Logout handler
        async function handleLogout(e) {
            e.preventDefault();
            try {
                await auth.signOut();
                localStorage.removeItem('moonlight_user');
                Swal.fire({
                    icon: 'success',
                    title: 'ƒêƒÉng xu·∫•t th√†nh c√¥ng!',
                    timer: 1500,
                    showConfirmButton: false
                }).then(() => {
                    window.location.href = 'index.html';
                });
            } catch (error) {
                console.error('Logout error:', error);
            }
        }
        
        // Logout handler (centralized above)
        
        // Update cart count
        function updateCartCount() {
            const cart = JSON.parse(localStorage.getItem('moonlight_cart')) || [];
            const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);
            cartCount.textContent = totalItems;
        }
        
        updateCartCount();
        
        // Listen for cart changes
        window.addEventListener('storage', (e) => {
            if (e.key === 'moonlight_cart') {
                updateCartCount();
            }
        });
        
        // Load featured products
        async function loadFeaturedProducts() {
            try {
                const productsRef = ref(db, 'products');
                const snapshot = await get(productsRef);
                
                if (snapshot.exists()) {
                    const products = [];
                    snapshot.forEach((child) => {
                        const product = child.val();
                        product.id = child.key;
                        if (product.isAvailable !== false) {
                            products.push(product);
                        }
                    });
                    
                    // Get first 4 products as featured
                    const featured = products.slice(0, 4);
                    renderFeaturedProducts(featured);
                } else {
                    // Show sample products if no data
                    renderSampleProducts();
                }
            } catch (error) {
                console.error('Error loading products:', error);
                renderSampleProducts();
            }
        }
        
        function renderFeaturedProducts(products) {
            featuredProducts.innerHTML = products.map(product => `
                <div class="product-card">
                    <div class="product-img-wrapper">
                        <img src="${product.imageUrl || 'https://via.placeholder.com/300x220'}" 
                             alt="${product.name}" class="product-img">
                        ${product.badge ? `<span class="product-badge">${product.badge}</span>` : ''}
                        <div class="product-actions">
                            <button class="product-action-btn" onclick="addToCart('${product.id}')">
                                <i class="fas fa-shopping-bag"></i>
                            </button>
                            <button class="product-action-btn">
                                <i class="fas fa-heart"></i>
                            </button>
                        </div>
                    </div>
                    <div class="product-info">
                        <span class="product-category">${product.category || 'C√† ph√™'}</span>
                        <h4 class="product-name">${product.name}</h4>
                        <div class="product-price">
                            ${formatPrice(product.price)}
                            ${product.oldPrice ? `<span class="product-price-old">${formatPrice(product.oldPrice)}</span>` : ''}
                        </div>
                    </div>
                </div>
            `).join('');
        }
        
        function renderSampleProducts() {
            const sampleProducts = [
                {
                    id: '1',
                    name: 'Cappuccino',
                    category: 'C√† ph√™',
                    price: 45000,
                    imageUrl: 'https://images.unsplash.com/photo-1572442388796-11668a67e53d?w=400',
                    badge: 'Hot'
                },
                {
                    id: '2',
                    name: 'Tiramisu',
                    category: 'B√°nh ng·ªçt',
                    price: 55000,
                    imageUrl: 'https://images.unsplash.com/photo-1571877227200-a0d98ea607e9?w=400',
                    badge: 'Best Seller'
                },
                {
                    id: '3',
                    name: 'Matcha Latte',
                    category: 'Tr√†',
                    price: 50000,
                    imageUrl: 'https://images.unsplash.com/photo-1515823064-d6e0c04616a7?w=400'
                },
                {
                    id: '4',
                    name: 'Croissant',
                    category: 'B√°nh ng·ªçt',
                    price: 35000,
                    imageUrl: 'https://images.unsplash.com/photo-1555507036-ab1f4038808a?w=400'
                }
            ];
            renderFeaturedProducts(sampleProducts);
        }
        
        function formatPrice(price) {
            return new Intl.NumberFormat('vi-VN', { 
                style: 'currency', 
                currency: 'VND' 
            }).format(price);
        }
        
        // Add to cart function
        window.addToCart = function(productId) {
            // Get product info and add to cart
            const cart = JSON.parse(localStorage.getItem('moonlight_cart')) || [];
            const existingItem = cart.find(item => item.id === productId);
            
            if (existingItem) {
                existingItem.quantity += 1;
            } else {
                // For demo, we'll add basic info - in real app, fetch from Firebase
                cart.push({
                    id: productId,
                    quantity: 1
                });
            }
            
            localStorage.setItem('moonlight_cart', JSON.stringify(cart));
            updateCartCount();
            
            Swal.fire({
                icon: 'success',
                title: 'ƒê√£ th√™m v√†o gi·ªè h√†ng!',
                timer: 1500,
                showConfirmButton: false,
                position: 'top-end',
                toast: true
            });
        };
        
        // Gallery lightbox
        document.querySelectorAll('.gallery-item').forEach(item => {
            item.addEventListener('click', () => {
                const img = item.querySelector('img');
                Swal.fire({
                    imageUrl: img.src,
                    imageAlt: img.alt,
                    showConfirmButton: false,
                    showCloseButton: true,
                    width: 'auto',
                    background: 'transparent'
                });
            });
        });
        
        // Initialize
        loadFeaturedProducts();
    </script>

    <style>
        /* Additional Homepage Styles */
        .hero {
            background: linear-gradient(135deg, var(--bg-dark) 0%, var(--primary) 50%, var(--primary-light) 100%);
            position: relative;
        }
        
        .hero-bg-elements {
            position: absolute;
            top: 0;
            right: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
            pointer-events: none;
        }
        
        .hero-moon {
            position: absolute;
            top: 10%;
            right: 10%;
            width: 200px;
            height: 200px;
            background: radial-gradient(circle, #ffd700 0%, #ffb347 50%, transparent 70%);
            border-radius: 50%;
            box-shadow: 0 0 100px 50px rgba(255, 215, 0, 0.2);
            animation: moonGlow 4s ease-in-out infinite;
        }
        
        @keyframes moonGlow {
            0%, 100% { box-shadow: 0 0 100px 50px rgba(255, 215, 0, 0.2); }
            50% { box-shadow: 0 0 120px 60px rgba(255, 215, 0, 0.3); }
        }
        
        .hero-stars {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: 
                radial-gradient(2px 2px at 20px 30px, white, transparent),
                radial-gradient(2px 2px at 40px 70px, white, transparent),
                radial-gradient(2px 2px at 50px 160px, white, transparent),
                radial-gradient(2px 2px at 90px 40px, white, transparent),
                radial-gradient(2px 2px at 130px 80px, white, transparent),
                radial-gradient(2px 2px at 160px 120px, white, transparent);
            background-repeat: repeat;
            background-size: 200px 200px;
            animation: twinkle 5s ease-in-out infinite;
        }
        
        @keyframes twinkle {
            0%, 100% { opacity: 0.5; }
            50% { opacity: 1; }
        }
        
        /* About Section */
        .about-section {
            background: var(--primary);
        }
        
        .about-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 60px;
            align-items: center;
        }
        
        .about-image {
            position: relative;
        }
        
        .about-image img {
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-lg);
        }
        
        .about-badge {
            position: absolute;
            bottom: -20px;
            right: -20px;
            background: var(--accent);
            color: var(--text-dark);
            padding: 20px;
            border-radius: var(--radius-md);
            text-align: center;
            box-shadow: var(--shadow-glow);
        }
        
        .badge-number {
            display: block;
            font-size: 2rem;
            font-weight: 700;
        }
        
        .badge-text {
            font-size: 0.9rem;
        }
        
        .about-features {
            display: flex;
            gap: 30px;
            margin-top: 2rem;
        }
        
        .about-feature {
            display: flex;
            align-items: center;
            gap: 10px;
            color: var(--accent);
        }
        
        .about-feature i {
            font-size: 1.25rem;
        }
        
        /* Testimonials */
        .testimonials-section {
            background: linear-gradient(135deg, var(--bg-dark), var(--primary-dark));
        }
        
        .testimonials-slider {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
        }
        
        .testimonial-card {
            background: var(--bg-card);
            padding: 30px;
            border-radius: var(--radius-md);
            box-shadow: var(--shadow-md);
        }
        
        .testimonial-rating {
            color: #ffc107;
            margin-bottom: 1rem;
        }
        
        .testimonial-text {
            font-style: italic;
            margin-bottom: 1.5rem;
            color: var(--text-secondary);
        }
        
        .testimonial-author {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .testimonial-author img {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            object-fit: cover;
        }
        
        .testimonial-author-info h5 {
            margin: 0;
            font-size: 1rem;
        }
        
        .testimonial-author-info span {
            font-size: 0.85rem;
            color: var(--text-muted);
        }
        
        /* Gallery */
        .gallery-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            grid-template-rows: repeat(2, 200px);
            gap: 15px;
        }
        
        .gallery-item {
            position: relative;
            border-radius: var(--radius-sm);
            overflow: hidden;
            cursor: pointer;
        }
        
        .gallery-item.large {
            grid-column: span 2;
            grid-row: span 2;
        }
        
        .gallery-item img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: var(--transition-slow);
        }
        
        .gallery-item:hover img {
            transform: scale(1.1);
        }
        
        .gallery-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: var(--bg-overlay);
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            transition: var(--transition-normal);
        }
        
        .gallery-overlay i {
            font-size: 2rem;
            color: var(--accent);
        }
        
        .gallery-item:hover .gallery-overlay {
            opacity: 1;
        }
        
        /* CTA Section */
        .cta-section {
            background: linear-gradient(135deg, var(--accent-dark), var(--accent));
            text-align: center;
        }
        
        .cta-content h2 {
            color: var(--text-dark);
        }
        
        .cta-content p {
            color: var(--primary);
            font-size: 1.1rem;
            margin-bottom: 2rem;
        }
        
        .cta-buttons {
            display: flex;
            gap: 20px;
            justify-content: center;
        }
        
        .cta-section .btn-primary {
            background: var(--primary);
            color: var(--text-primary);
        }
        
        .cta-section .btn-outline {
            border-color: var(--primary);
            color: var(--primary);
        }
        
        .cta-section .btn-outline:hover {
            background: var(--primary);
            color: var(--text-primary);
        }
        
        /* User Dropdown */
        .user-dropdown {
            position: fixed;
            top: 70px;
            right: 20px;
            background: var(--bg-card);
            border-radius: var(--radius-md);
            box-shadow: var(--shadow-lg);
            min-width: 200px;
            opacity: 0;
            visibility: hidden;
            transform: translateY(-10px);
            transition: var(--transition-normal);
            z-index: 1001;
        }
        
        .user-dropdown.active {
            opacity: 1;
            visibility: visible;
            transform: translateY(0);
        }
        
        .user-dropdown-header {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 15px;
            border-bottom: 1px solid var(--secondary);
        }
        
        .user-dropdown-header i {
            font-size: 1.5rem;
            color: var(--accent);
        }
        
        .dropdown-item {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 12px 15px;
            color: var(--text-secondary);
            transition: var(--transition-fast);
        }
        
        .dropdown-item:hover {
            background: var(--bg-card-hover);
            color: var(--accent);
        }
        
        /* Admin Nav Item */
        .admin-nav-item {
            display: none;
            margin-left: 10px;
        }
        
        .admin-nav-item .nav-link {
            background: var(--accent);
            color: var(--text-dark);
            padding: 8px 16px;
            border-radius: var(--radius-full);
        }
        
        .admin-nav-item .nav-link:hover {
            background: var(--accent-dark);
            color: var(--text-dark);
        }
        
        /* Skeleton Loading */
        .skeleton .skeleton-img {
            width: 100%;
            height: 220px;
            background: linear-gradient(90deg, var(--secondary) 25%, var(--secondary-light) 50%, var(--secondary) 75%);
            background-size: 200% 100%;
            animation: shimmer 1.5s infinite;
        }
        
        .skeleton .skeleton-text {
            height: 15px;
            background: var(--secondary);
            border-radius: 4px;
            margin-bottom: 10px;
            animation: shimmer 1.5s infinite;
        }
        
        .skeleton .skeleton-text.short {
            width: 60%;
        }
        
        @keyframes shimmer {
            0% { background-position: -200% 0; }
            100% { background-position: 200% 0; }
        }
        
        /* Responsive */
        @media (max-width: 992px) {
            .about-grid {
                grid-template-columns: 1fr;
                gap: 40px;
            }
            
            .about-badge {
                bottom: 20px;
                right: 20px;
            }
            
            .hero-moon {
                width: 150px;
                height: 150px;
                top: 5%;
                right: 5%;
            }
        }
        
        @media (max-width: 768px) {
            .gallery-grid {
                grid-template-columns: repeat(2, 1fr);
                grid-template-rows: repeat(4, 150px);
            }
            
            .gallery-item.large {
                grid-column: span 2;
                grid-row: span 1;
            }
            
            .about-features {
                flex-wrap: wrap;
            }
            
            .cta-buttons {
                flex-direction: column;
                align-items: center;
            }
            
            .hero-moon {
                width: 100px;
                height: 100px;
            }
        }
    </style>
</body>
</html>
